<script>
  // ==============================
  // CONFIG AREA – CHANGE FOR NEW LEAGUES
  // ==============================

  const clubNames = [
    "BSC Young Boys",
    "FC Basel 1893",
    "FC St. Gallen 1879",
    "FC Zurich",
    "FC Luzern",
    "Servette FC",
    "FC Sion",
    "FC Winterthur",
    "FC Lausanne-Sport",
    "Grasshopper Club Zurich",
    "FC Lugano",
    "Yverdon Sport FC"
  ];

  const capacities = [31500, 38512, 20660, 26104, 15680, 30084, 14850, 8700, 12544, 26104, 4900, 4200];
  const sellThrough = [90.4, 67.9, 87.5, 58.3, 77.0, 33.0, 66.9, 92.7, 55.0, 26.4, 79.2, 65.9];

  // Highlight club (Servette)
  const highlightIndex = 5;
  const xMax = 40000;

  // ==============================
  // DATA TRACES
  // ==============================

  const markerColors = clubNames.map((_, i) =>
    i === highlightIndex ? "#D5C393" : "#07385E" // gold vs solid royal blue
  );

  const markerSizes = clubNames.map((_, i) =>
    i === highlightIndex ? 20 : 14
  );

  const clubsTrace = {
    type: "scatter",
    mode: "markers+text",
    name: "Clubs",
    x: capacities,
    y: sellThrough,
    text: clubNames,
    textposition: "top center",
    textfont: {
      family: "Montserrat, sans-serif",
      size: 12,
      color: "#1A1A1A"
    },
    marker: {
      color: markerColors,
      size: markerSizes,
      line: { color: "#FFFFFF", width: 2 }
    },
    hovertemplate:
      "<b>%{text}</b><br>" +
      "Capacity: %{x}<br>" +
      "Sell-through: %{y:.1f}%<extra></extra>"
  };

  const line100Trace = {
    type: "scatter",
    mode: "lines",
    name: "100% Capacity",
    x: [0, xMax],
    y: [100, 100],
    line: {
      color: "#D5C393",   // strong gold
      width: 2,
      dash: "dash"
    },
    hoverinfo: "skip"
  };

  // ==============================
  // LAYOUT – HIGHER CONTRAST / BIGGER
  // ==============================

  const layout = {
    margin: { l: 80, r: 40, t: 40, b: 70 },
    paper_bgcolor: "rgba(0,0,0,0)",
    plot_bgcolor: "#FFFFFF",
    showlegend: false,

    xaxis: {
      title: {
        text: "Stadium Capacity",
        font: { family: "Montserrat, sans-serif", size: 14, color: "#1A1A1A" }
      },
      tickfont: { family: "Montserrat, sans-serif", size: 12, color: "#333333" },
      gridcolor: "rgba(0,0,0,0.12)",
      gridwidth: 1,
      linecolor: "#1A1A1A",
      linewidth: 1.2,
      mirror: true,
      rangemode: "tozero"
    },
    yaxis: {
      title: {
        text: "Average League Sell-Through (%)",
        font: { family: "Montserrat, sans-serif", size: 14, color: "#1A1A1A" }
      },
      tickfont: { family: "Montserrat, sans-serif", size: 12, color: "#333333" },
      gridcolor: "rgba(0,0,0,0.12)",
      gridwidth: 1,
      linecolor: "#1A1A1A",
      linewidth: 1.2,
      mirror: true,
      range: [0, 105]
    },

    annotations: [
      {
        x: capacities[highlightIndex],
        y: sellThrough[highlightIndex],
        xref: "x",
        yref: "y",
        text: "Servette: big house,\nlow utilization",
        showarrow: true,
        arrowhead: 2,
        arrowsize: 0.8,
        ax: 50,
        ay: -50,
        font: {
          family: "Montserrat, sans-serif",
          size: 12,
          color: "#07385E"
        },
        arrowcolor: "#07385E"
      }
    ]
  };

  const config = { responsive: true, displayModeBar: false };

  Plotly.newPlot("swiss-league-plot", [clubsTrace, line100Trace], layout, config);
</script>
